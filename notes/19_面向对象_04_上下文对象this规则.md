# 上下文对象this规则

* 对象打点调用函数，this指向对象

   <script>
       let obj = {
           name:"xioaming",
           age:18,
           sex:"男",
           sayHello:function(){
               console.log(`我的名字是${this.name},我的年龄是${this.age},我的性别是${this.sex}`);
           }
       }
       obj.sayHello();
  </script>

* 函数自调用执行，this指向window对象

  ```html
  <script>
      let fn = function(){
          return this.a + this.b;
      };
      var a = 1;
      var b = 2;
      let obj = {
          a:2,
          b:fn(),
          c:fn
      }
      let result = obj.c();
      console.log(result);
  </script>
  ```

* 数组(类数组对象)枚举出函数进行调用，上下文是这个数组(类数组对象) => 对象打点调用;

  ```html
  <script>
      let arr = [
          "A",
          "B",
          "C",
          function(){
              console.log(this[0]);
          }
      ];
      arr[3]();
  </script>
  ```

  ```html
  <script>
  	function fn(){
          arguments[3]();
      };
      fn("A","B","C",function(){
          this[0];
      })
  </script>
  ```

* IIEF立即执行函数，this指向window对象

  ```html
  <script>
      var a = 1;
      var obj = {
          a:2,
          fun:(function(){
              var a = this.a;
              return function(){
                  console.log(a + this.a);
              };
          })()
      };
      obj.fun();//1 +2 = 3
  </script>
  ```

* 定时器、延时器调用函数，this指向window

  ```html
  <script>
      let obj = {
          a:1,
          b:2,
          fun:function(){
              console.log(this.a + this.b);
          }
      }
      var a = 3;
      var b = 4;
      setTimeout(obj.fun,2000);//3 + 4 = 7
  </script>
  ```

  